<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<span class="brand">Contact manager</span>
     </div>
   </div>
</div>

<div id="main-region" class="container">
	<p>Here is static content in the web page. You'll notice that it gets replaced by our app as soon as we start it.</p>
</div>

<script type="text/template"id="contact-list-item">
	<%%= firstName %> <%%= lastName %>
</script>



<script type="text/javascript">
	var ContactManager = new Marionette.Application();

	ContactManager.addRegions({
		mainRegion: "#main-region"
	});

	ContactManager.Contact = Backbone.Model.extend({
		defaults: {
			firstName: "",
			lastName: "",
			phoneNumber: "No phone number!"
		}
	});

	ContactManager.ContactCollection = Backbone.Collection.extend({
		model: ContactManager.Contact,
    comparator: function(contact) {
      return contact.get("firstName") + " " + contact.get("lastName");
    }
    // comparator: "firstName"
	});

	ContactManager.ContactItemView = Marionette.ItemView.extend({
		tagName: "li",
		template: "#contact-list-item",
    events: {
      "click": "alertPhoneNumber"
    },
    alertPhoneNumber: function(){
      console.log(this.model.escape("phoneNumber"));
    }
	});

  ContactManager.ContactsView = Marionette.CollectionView.extend({
  	tagName: "ul",
    itemView: ContactManager.ContactItemView
	});

	ContactManager.on("initialize:after",function(){
		var contacts = new ContactManager.ContactCollection([
      {
        firstName: "Alice",
        lastName: "Tampen"
      },
      {
        firstName: "Bob",
        lastName: "Brigham"
      },
      {
        firstName: "Alice",
        lastName: "Artsy"
      },
      {
        firstName: "Alice",
        lastName: "Arten"
      },
      {
        firstName: "Charlie",
        lastName: "Campbell"
      }
    ]);

    var contactsListView = new ContactManager.ContactsView({
    	collection: contacts
    });

  	ContactManager.mainRegion.show(contactsListView);
	});

  ContactManager.start();
</script>